# top
![image](/img/top.png)

리눅스 시스템의 운용상황을 실시간으로 전반적인 상황을 **모니터링** 하거나 **프로세스 관리**를 할 수 있는 유틸리티

기본 갱신 주기는 3초

## 표기 해설
|표기|설명|
|---|---|
|load average|3개의 숫자는 CPU의 부하를 1분/5분/15분 단위로 측정|
|PID|프로세스의 ID|
|USER|포로세서를 실행한 유저|
|Taks|프로세스 개수|
|PR|우선 순위|
|NI|nice 값|
|VIRT,RES,SHR|메모리 관련|
|S|프로세스의 상태|

### 메모리에 관한 표기
> VIRT는 virtual memory의 약자로 프로세스에 할당된 가상 메모리 전체
> 
>> *VIRT = SWAP(디스크에 램대신 저장된 메모링)+RES(물리적 RAM에 담긴양)*
> 
> SHR는 다른 프로세스와 공유중인 메모리(대부분 라이브러리에서 사용함)

### 상태 에 관한 표기
|상태|풀네임|설명|
|---|---|---|
|D|Uninterruptiable sleep|보통 I/O를 대기|
|R|Running or runnable|실행중 혹은 실행가능|
|S|Interruptible sleep|깨울수 있는 대기상태|
|T|Stopped|중지|
|Z|Zombie|비정상적으로 프로세스가 종료되지 않는 상태|

## 실행 옵션
|실행 옵션|설명|
|---|---|
|-a|메모리 사용률 정렬|
|-b|배치 모드에서 시작|
|-c|명령어 대신 명령어 라인을 보여줌|
|-d|갱신 **주기**를 조정|
|-n|top 실행 반복 **횟수**를 정함|
|-h|도움말|
|-H|모든 개별 쓰레드가 보여짐|
|-i|좀비(zombie) 또는 Idle 상태의 것들은 무시됨|
|-m|VIRT 대신 USED를 보고|
|-M|메모리 표시에 접두사(K/M/G)을 보여줌|
|-n|반복의 최대 수를 지정|
|-P|지정된 프로세스 ID들만 보여줌|
|-s|보안 모드로 시작|
|-S|누적 시간 모드로 시작. 각 프로세스는 CPU를 사용한 시간과 함께 출력|
|-u|지정된 유효 사용자에 의한 프로세스만 보여줌|
|-U|지정된 사용자에 의한 프로세스만 보여줌.|
|-v|버전|

## 실행중 커맨드
### 비정렬
|명령어|설명|
|---|---|
|스페이스|화면갱신|
|k|kill 명령|
|f|정렬할 필드 선택|
|Z|화면 출력 색상 변경|
|z|Z로 변경된 출력 색상과 기본 출력 색상간 전환|
|B|**글자 Bold전환**|
|I|load avg 항목 토글|
|t|프로세스와 cpu 항목 토글|
|m|메모리 항묵 토글|
|O|정렬 기준 지정|
|1| CPU 코어별 사용량
|q|종료|

### 정렬
|명렬|정렬기준|
|---|---|
|shift+p|CPU 사용률 정렬|
|shift+m|메모리 사용률 정렬|
|shift+t|프로세스가 돌아가고있는 시간 정렬|
|a|메모리 사용량에 정렬|
|r|nice 값 변경|
|r|nice 조정|
> nice는 우선순위를 뜻하며, -20 ~ 20 까지 사용가능. 낮을수록 우선권이 높음. 기본값은 0

# ps
![image](/img/ps.png)

*Process Status*

현재 실행중인 프로세스의 목록을 보는 명령어
## 실행 옵션
> -의 유무의 ***차이가 있다!***
>> 이질적인 BSD 표기법 때문에 ***결과가 다를수 있음!***
![image](/img/ps차이.png)

## 표기법
|실행옵션|설명|BSD 기준?|SYSTEM V 기준?|
|---|---|---|---|
|USER|프로세스 소유자의 이름|O|-|
|UID|프로세스 소유자의 이름|-|O|
|PID|프로세스의 ID|-|-|
|PPID|부모 프로세스의 PID|-|-|
|%CPU|CPU 사용률|O|-|
|%MEM|메모리 사용률|O|-|
|VSZ|가상 메모리 사용률|-|-|
|RSS|물리적 메모리(RAM) 사용률|-|-|
|TTY|해당 프로세스를 실행중인 터미널|-|-|
|S|상태코드|-|O|
|STAT|상태코드|O|-|
|TIME|프로세스의 총실행시간|-|-|
|COMMAND|프로세스의 실행 인자(옵션)|-|-|
|STIME|프로세스가 실행된 시간|-|-|
|C|단기간동안의 CPU사용률|-|O|
|CP|단기간동안의 CPU사용률|O|-|
|PRI|실행 우선순위|-|-|
|NI|nice 번호|-|-|

## 실행옵션
|실행옵션|설명|BSD 기준?
|---|---|---|
|-A|모든 프로세스|
|-a|세션리더(로그인 셀 등등)을 제외한 서비스 프로세스 처럼 터미널에 종속되지 않는 프로세스 출력|
|없음|터미널과 연관된 프로세스 출력|a|
|-e|리눅스 커널을 제외한 모든 프로세스|
|-f|FULL Format으로 보여준다. *UID/PID*|
|-l|Long Format 으로 출력. *PRI,NI*|l|
|-o|출력 포맷 지정 *pid,tty,time,cmd* 등을 지정|
|-M|64비트 르로세스|
|-m|커널 쓰레드도 표시|
|-p|특정 PID 지정|
|-r|실행중인 프로세스|
|-u|특정 유저의 프로세스 정보 확인|u|
|-x|nohup등으로 실행시킨 셀이 없는 프로세스들만 출력|x|

# jobs
![image](/img/jobs.png)

백그라운드로 실행중인 프로세스를 보여준다.
|job번호|기호|상태
|---|---|---|

## 상태표기
|상태|설명|가능한 신호
|---|---|---|
|Running|작업이 진행중임|
|Done|작업이 정상적으로 종료됨|
|Done(반환값)|작업이 종료됨 하지만 0 이외의 값이 프로세스로부터 반환됨**주로 오류 발생시**|
|Stopped|작업이 중단됨|
|Stopped(신호)|신호가 작업을 중단시킴|SIGTSTP/SIGSTOP/SIGTTIN/SIGTTOU|

## 실행옵션
|실행 옵션|설명|
|---|---|
|-l|작업 번호, 현재 작업, 프로세스 그룹 ID, 상태, 작업을 시작한 명령 정보|
|-n|중지 또는 종료한 작업만 표시|
|-p|PID표시|

## 다른 명령어와의 연계
```bash
wait %1
fg %1
bg %1
kill %1
```
작업번호 접두어 %를 사용하여 연계가능

# kill
![image](/img/kill.png)

특정 프로세스를 죽인다.
```bash
kill [옵션] 인자(PID)
```
## 실행옵션
|실행 옵션|설명|기본값
|---|---|---|
|-s|프로세스로 보낼 리눅스 신호|
|-l|리눅스 신호의 목록 출력|
|-a|UID를 신경쓰지않고 죽임|
|-p|해당 프로세스의 PID를 가져옴 *죽이지않음*|
|-숫자|프로세스로 보낼 신호를 지정함|SIGTERM|

## 인자
|PID|설명|
|---|---|
|n|해당 PID로 신호|
|0|실행되고 있는 프로세스 그룹에게 신호|
|-1|PID가 1보다큰 모든 프로세스에게 신호|
|-숫자(단,n>1)|모든 프로세스 에게 신호함 단, 보낼 신호를 먼저 지정 하거나 앞에 -- 옵션을 지정해줘야함|

# VIM 매크로
## q
`q레지스터`
레지스터에 매크로 입력 시작

## @
`@레지스터`
해당 레지스터의 매크로를 실행

## 매크로의 사용법
1) q레지스터를 사용하여 기록을 시작하겠다고 명령한다.
2) 하단에 `recording @레지스터`로 표기가 된다. *(버전에 따라 다를수있다)*
3) 열심히 키보드로 매크로를 작성한다..
4) 기록이 완료되었다면 일반모드에서 q를 눌러 기록을 중지한다.
5) 해당 레지스터에 매크로가 기록된다.
6) `@레지스터`로 매크로를 실행할수있다!